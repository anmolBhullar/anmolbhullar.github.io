\documentclass[a4paper, 11pt]{book}

\newcommand*{\plogo}{\fbox{$\mathcal{DB}$}}

\usepackage[utf8]{inputenc}
\usepackage{stix}
\usepackage[english]{babel}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{nicefrac}
\usepackage{commath}
\usepackage{dirtytalk}

\usepackage{graphicx}

\newtheorem{theorem}{Theorem}
\newtheorem{es}{Examples}
\newtheorem*{example}{Example}

\newcommand\restr[2]{{% we make the whole thing an ordinary symbol
    \left.\kern-\nulldelimiterspace % automatically resize the bar with \right
    #1 % the function
    \vphantom{\big|} % pretend it's a little taller at normal size
    \right|_{#2} % this is the delimiter
}}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
 
\theoremstyle{remark}
\newtheorem*{remark}{Remark}

\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}

\newtheorem{prop}{Proposition}

\newcommand{\inter}[1]{int(#1)}

\begin{document}

    \begin{titlepage} 
        \raggedleft

        \rule{1pt}{\textheight} % Vertical line
        \hspace{0.05\textwidth} % Whitespace between the vertical line and title page text
        \parbox[b]{0.75\textwidth}{ % Paragraph box for holding the title page text, adjust the width to move the title page 
            % left or right on the page
                            
            {\Huge\bfseries MATC37 Lecture \\[0.5\baselineskip] Notes }\\[2\baselineskip] % Title
            {\large\textit{Lecture notes on a course in real analysis}}\\[4\baselineskip] % Subtitle or further description
            {\Large\textsc{A. WortschÃ¶pfer}} % Author name, lower case for consistent small caps
                                                    
            \vspace{0.5\textheight} % Whitespace between the title block and the publisher
                                                            
            {\noindent The Publisher~~\plogo}\\[\baselineskip] % Publisher and logo
        }
    \end{titlepage}

    \chapter{Shortcomings of the Riemann integral}

    In the turn of the 19th century many mathematicians were starting to discover that the Riemann integral had many shortcomings
    and were starting to look for a new formulation. Thus, was born the Lebesgue integral. Here we will discuss some of the problems
    that motivated the idea for the Lebesgue measure and the Lebesgue integral.

    \section{Limits of continuous functions}

    Let $f: [0,1] \to \mathbb{R}$ be continuous. Let $f_n: [0,1] \to \mathbb{R}$ be a continuous function so that
    $\{f_n\}_{n\in\mathbb{N}}$ is a sequence of continuous functions on the interval $[0,1]$. Assume that
    \[ \lim_{n\to\infty} f_n(x) = f(x) \]
    exists for every $x\in[0,1]$. We know from MATB43 that if each $f_n$ is uniformily continuous, then $f$ is continuous but suppose
    each $f_n$ were not uniformily continuous, then there are issues that may arise which may seem subtle but have radical effects.
    For example, we can construct a sequence of continuous functions $\{f_n\}$ converging everywhere to $f$ so that
    \begin{enumerate}
        \item[(a)] $0\leq f_n(x)\leq 1$ for all $x$
        \item[(b)] $f_n \geq f_{n+1}$ i.e. the sequence $\{f_n\}$ is monotonically decreasing as $n\to\infty$.
        \item[(c)] $f(x) = \lim_{n\to\infty} f_n(x)$ exists for all $x$
    \end{enumerate}
    However, $f$ is not Riemann integrable!\\
    Note that, in view of (b), we obtain $\int_0^1 f_n(x)dx \geq \int_0^1 f_{n+1}(x)dx$. Combining this with the fact that there is
    a lower bound (using (a)) on $\int_0^1 f_n(x)dx$, we know that the sequence $\int_0^1 f_n(x)dx$ converges to a limit.
    Therefore, the question arises: What method of integration can be used to integrate $f$ and obtain that for it
    \[ \int_0^1 \lim_{n\to\infty} f_n(x)dx = \lim_{n\to\infty} \int_0^1 f_n(x)dx \]
    It is with Lebesgue integration that we can solve this problem.

    \section{Irregular Geometric Objects}
    We say a curve is \textbf{rectifiable} if its length $L$ (defined in terms of the supremum of lengths of all polygonal lines
    joining successively finitely many points of the curve) is finite. Rectifiable curves, because they are endowed with length are
    one-dimensional in nature. However, it is worth asking if there are non-rectifiable curves which are two-dimensional or rather just
    any dimensions more than one. We shall see the answer to this question in terms of space-filling curves and generally have dimensions
    between 1 and 2.\\
    Recall our area/length definitions for regular polygons. It is worth asking if we can extend our understanding of area and length
    so that we can measure geometric objects that are not as simple as regular polygons such as fractional objects such as
    Koch's snowflake. Note these objects are still parameterized by lines so this question and the previous are well connected.

    \section{Differentiation and Integration}
    The fundamental theorem of calculus expresses the notion that differentiation and integration are inverse operations and it
    does this via the two equations below
    \begin{align}
        F(b) - F(a) &= \int_a^b F'(x)dx, \\
        \nicefrac{d}{dx}\int_0^x f(y)dy &= f(x).
    \end{align}
    It is natural to try and find a general class of functions which respect either of these equations. However, for the first
    equation, the existence of continuous functions $F$ which are nowhere differentiable, or for which $F'(x)$ exists for every
    $x$, but $F'$ is not integrable, leads to the problm of finding a general class of functions for which this equation is valid.
    For the second equation, the question is to formulate properly and establish this assertion for the general class of integrable
    functions $f$. These questions can be answered with the help of certain covering arguments, and the notion of absolute continuity.

    \section{Probability Theory}
    Define $S$ to be a space of $\{0,1\}$-valued sequences (e.g. fair coin toss). Define $f: S \to [0,1]$ where
    \[ f(s) = \sum_{n=1}^{\infty} \nicefrac{S_n}{2^n} \]
    Note this implies $0\leq f \leq 1$.
    Then, we can compute,
    \[ P(s_1=0,s_2=1) = l([\nicefrac{1}{4},\nicefrac{1}{2}]) = \nicefrac{1}{4} \]
    However, what happens if we try to take an arbitrary set $A\subset [0,1]$ and try to compute $P(f^{-1}(A)) = l(A)$. This problem
    is answered (not completely, however) by the Lebesgue measure.

    \section{The measure problem (MP)}

    To put matters clearly, the fundamental issue that must be understood in order to try to answer all of the questions raised above
    is that of measure. Stated impercisely in one dimension, we are trying to assign to each subset $E$ of $\mathbb{R}$ its 
    one-dimensional measure $l(E)$, that is, its length, thereby extending the standard notion of length defined for closed intervals.
    For example, consider the sets below:
    \[ (i)\: [2,6] \quad (ii)\: (2,6] \quad (iii)\: \{2\} \quad (iv)\: \mathbb{R} \quad (v)\: \mathbb{Q} \quad (vi) 
        \cup_{n=1}^{\infty} [n,n+\nicefrac{1}{n^2}] \quad (vii)\: \emptyset\]
    It seems intuitive to assign 4 to (i) so that $l([2,6]) = 6 - 2 = 4$. We can assign (ii) the same measure as well. (iii) is just
    a single point so it is a 0 dimensional object, therefore it seems intuitive to assign it the measure 0 so that $l(\{2\}) = 0$.
    We assign (vii) the same measure since it contains \textit{no} points whatsoever. There is no intuitive way to assign
    $\mathbb{R}$ a finite measure, therefore we write $l(\mathbb{R}) = \infty$. However, we cannot apply the same reasoning to (v).
    Recall from MATB43 that any countable set has Lebesgue measure zero, therefore we write $l(\mathbb{Q}) = 0$. (vi) is a bit tricky
    but easily understood if we remember that $l([n,n+\nicefrac{1}{n^2}]) = (n+\nicefrac{1}{n^2}) - n = \nicefrac{1}{n^2}$ so that
    \[ l(\cup_{n} [n,n+\nicefrac{1}{n^2}]) = \sum_n l([n,n+\nicefrac{1}{n^2}]) = \sum_n \nicefrac{1}{n^2} = \nicefrac{\pi^2}{6} \]
    Moving from left-most part to the second-left most part is done through a equality that we have not yet proven but it does
    seem intuitive to want this to be true. Therefore, we should want $l$ to have this property.\\
    Before, we move on further, it is important to discuss the closely related integral problem as well.

    \subsection{The integral problem (IP)}
    This is concerned with the question: For which $f: [0,1]\to\mathbb{R}$ can we make sense of $\int_0^1 f(x)dx$? Thus, we are
    concerned with finding the class of integrable functions. Note that MP and IP are closely related.\\
    Given a set $A\subset\mathbb{R}$, consider the characteristic function
    \[ \mathcal{X}(A) = \begin{cases} 
            1, & x\in A \\
            0  & x\not\in A
       \end{cases} \]
   Then $\int \mathcal{X}_A(x)dx = l(A)$ i.e. integrating the characteristic function over a set is the same as taking its measure.\\
   Conversely, given $f:[0,1]\to\mathbb{R}$ we can try to write $f$ as 
   \[ f = \sum_n a_n\mathcal{X}_{A_n} \]
   for some suitable $a_n\in\mathbb{R}$ and $A_n\subset\mathbb{R}$ and then we try to compute
   \[ \int f(x)dx = \int \sum_n a_n\mathcal{X}_{A_n}dx = \sum a_n\int \mathcal{X}_{A_n}dx = \sum a_nl(A_n) \]
   Note, we actually used the equality mentioned in section 1.1.

   \section{Wishlist for MP}
   We are looking for a non-negative (length intuitively should be non-negative) function $m$ defined on any given subset of 
   $\mathbb{R}$. Therefore, we are looking for a function $l: \mathcal{P}(\mathbb{R}) \to \mathbb{R}^{+}$ such that:
   \begin{enumerate}
       \item If $A_1,A_2,\hdots$ are disjoint then
           \[ l(\bigcup_{n} A_n) = \sum_n l(A_n) \]
           This is called the \textbf{countably additive} property.
       \item $l(A+t) = l(A)$ for any $t\in\mathbb{R}$. This is called the \textbf{translation invariance} property.
       \item $l([0,1]) = 1$ i.e. $l$ is \textit{normalized} 
   \end{enumerate}

   However, we shall see that this is an unrealistic wishlist.

   \begin{theorem}[Vitali, 1905]
       There does not exist a measure $l: \mathcal{P}(\mathbb{R}) \to [0,\infty]$ such it satisfies all the properties above.
   \end{theorem}
   \begin{proof}
       Define an equivalence relation on the closed unit interval $\mathbb{I} = [0,1]$ via
       \[ \forall\;x,y\in\mathbb{I}:\;x\sim y \Leftrightarrow x-y\in\mathbb{Q} \]
       Then, we have a natural set of elements of each equivalence class given by $\sim$. Denote this set by $A$. Note,
       $M\subset\mathbb{I}$ and for each $x\in\mathbb{R}$ there exists a unique $y\in A$ and $r\in\mathbb{Q}$ such that
       $x = y + r$.\\
       Then, define
       \[ A_r := \{y+r: y\in A\} \]
       for each $r\in\mathbb{Q}$. Because of what we noted above, we obtain the result that $\mathbb{R}$ is partitioned
       into countably many disjoint sets, and specifically by the sets:
       \[ \mathbb{R} := \bigcup \{A_r: r\in\mathbb{Q}\} \]
       Suppose that $A$ is measurable by $l$. Then:
       \[ 1 = l([0,1]) = \sum_{r\in\mathbb{Q}} l(A_r) = l(A) \]
       Then $l(A)\neq 0$ since by countable additivity, we would have $l([0,1]) = 0$. Suppose $l(A)>0$. Then
       \begin{align*}
           l([0,1]) \geq l(\bigcup_{r\in\mathbb{Q}\cap[0,1]} A_r) = \sum_{r\in\mathbb{Q}\cap[0,1]} l(A_r) = \infty
       \end{align*}
       since $l(A_r) = l(A)$ by translation invariance. But this is also a contradiction as $1 \geq \infty$. Therefore,
       $l$ cannot satisfy \textit{every} property above.
   \end{proof}

   It is because of this that we loosen our wishlist to allow the existence of non-measurable sets. The reader is warned
   that constructions of such sets are not trivial!\\

   If we try to loosen countable additivity to just \textit{finite} additivity, it is still too strong. Consider the Banach-Tarski
   paradox (very non trivial to prove so it will not be done here). This is possible by assuming all properties above but replacing
   countable additivity by finite additivity. It turns out that such a measure can exist in $\mathbb{R}^1$ but not any higher.

   \begin{theorem}[Banach-Tarski Paradox]
       The three-dimensional unit ball can be decomposed into a finite number of disjoint sets, which can then be reassembelled
       into two three-dimensional unit balls.
   \end{theorem}

    While this is not a contradiction but it does allow for highly non intuitive results.

    \chapter{Measure Theory}

    \section{Preliminaries}

    This section is devoted to reviewing the basic notions that one has in $\mathbb{R}^d$ (positive integer $d$).\\

    The rational numbers are denoted by $\mathbb{Q}$. The real numbers are denoted by $\mathbb{R}$ and can be written as
    $(-\infty,+\infty)$. The extended real numbers are written as $\mathbb{R}\cup\{\pm \infty\}$ or $[-\infty,+\infty]$.\\

    \begin{definition}
        Fix an integer $d\geq 1$. A \textbf{point} $x\in\mathbb{R}^d$ is given by an ordered $d$-tuple of real numbers 
        ($\mathbb{R}^1$),
        \[ \mathbf{x} = (x_1,\hdots,x_d)\qquad\text{where}\qquad x_1,\hdots,x_d\in\mathbb{R} \]
        $\mathbb{R}^d$ is called the \textbf{$d$-dimensional Euclidean space}.
    \end{definition}

    Recall, that we can add vectors (points in a Euclidean space),
    \[ \mathbf{x} = (x_1,\hdots,x_d),\;\mathbf{y} = (y_1,\hdots,y_d)\implies \mathbf{x}+\mathbf{y} = (x_1+y_1,\hdots,x_d+y_d) \]
    and multiply them by a scalar $\lambda\in\mathbb{R}$,
    \[ \lambda\mathbf{x} = (\lambda x_1,\hdots,\lambda x_d) \]

    \begin{definition}
        The \textbf{norm} of $x\in\mathbb{R}^d$ is defined as $|x| = (\sum x_i^2)^{\nicefrac{1}{2}}$. The norm operator has
        the following properties,
        \begin{itemize}
            \item $|x|\geq 0$ and $|x|=0$ if and only if $x=0$.
            \item $|\lambda x| = |\lambda||x|$
            \item $|x+y| \leq |x| + |y|$
        \end{itemize}
    \end{definition}

    In particular, we can \textit{measure} the distance between $x,y\in\mathbb{R}^d$ via
    \[ d(x,y) := |x-y| \]
    where $d$ is then a function $d:\mathbb{R}^d\times\mathbb{R}^d\to[0,\infty)$ most comonly called the \textbf{distance function}
    with the following properties:
    \begin{enumerate}
        \item $d(x,y)\geq 0$ and $d(x,y)=0$ if and only if $x=y$
        \item $d(x,y) = d(y,x)$
        \item $d(x,z) = d(x,y) + d(y,z)$ for $x,y,z\in \mathbb{R}^d$
    \end{enumerate}

    \begin{definition}
        For a set $E\subset\mathbb{R}^d$, the \textbf{complement} is
        \[ E^c := \{x\in\mathbb{R}^d: x\not\in E\} = \mathbb{R}^d\textbackslash E \]
        More generally, for two sets $E,F\subset\mathbb{R}^d$, we have the \textbf{difference of two sets} being given by
        \[ F\textbackslash E := \{x\in\mathbb{R}^d: x\in F\;\text{and}\;x\not\in E\} \]
        Also, recall
        \[ E \cup F = \{x\in\mathbb{R}^d: x\in E\;\text{and}\;x\in F\}\qquad(\textbf{union}) \]
        \[ E \cap F = \{x\in\mathbb{R}^d: x\in E\;\text{and}\;x\in F\}\qquad(\textbf{intersection}) \]

        Finally, for $E,F\subset\mathbb{R}^d$ define the \textbf{distance between sets} by
        \[ d(E,F) := \text{inf}_{x\in E, y\in F} d(x,y) \]
    \end{definition}

    This "$d$" is not to be confused with the one above because it does not have \textit{all} of the properties that the distance
    function between points does. Namely, if $E = (0,1)$ and $F = (1,2)$, then $d(E,F)=0$ but $E\neq F$, and in fact 
    $E\cap F=\emptyset$.

    \subsection{Open, Closed and Compact sets}

    \begin{definition}
        For $x\in\mathbb{R}^d$ and $r>0$, define
        \[ B_r(x) := \{y\in\mathbb{R}^d: d(x,y)<r\} \]
        $B_r(x)$ is said to be an \textbf{open ball} of radius $r$. A subset $E$ of $\mathbb{R}^d$ is \textbf{open} if for all $x\in E$,
        there exists $r>0$ such that $B_r(x)\subset E$.
    \end{definition}

    \begin{prop}
        An open ball $B_r(x)$ is open.
    \end{prop}
    \begin{proof}
        Given any point $\widetilde{x}\in B_r(x)$, we want to find $\widetilde{r}>0$ such that 
        $B_{\widetilde{r}}(\widetilde{x})\subset B_r(x)$.\\

        Set $\widetilde{r} = r - d(\widetilde{x},x)$. We know $\widetilde{r}$ is positive since $d(\widetilde{x},x)<r$ (definition
        of an open ball), which implies $\widetilde{r}>0$. Now if $z\in B_{\widetilde{r}}(\widetilde{x})$, then
        \[ d(x,z) \leq d(x,\widetilde{x}) + d(\widetilde{x},z) \leq d(x,\widetilde{x}) + \widetilde{r} = r\]
        Thus $z\in B_r(x)$. Hence $B_{\widetilde{r}}(\widetilde{x})\subset B_r(x)$ as wanted.
    \end{proof}

    \begin{prop}
        \begin{enumerate}
            \item $\emptyset$ and $\mathbb{R}^d$ are open.
            \item If $\{\theta_{\alpha}\}$ is a collection of open sets, then $\cup_{\alpha}\theta_{\alpha}$ is open.
            \item If $\theta_{\alpha_1},\hdots,\theta_{\alpha_n}$ are open, then $\cap_{i=1}^n \theta_{\alpha_i}$ is open.
        \end{enumerate}
    \end{prop}
    \begin{proof}
        \begin{enumerate}
            \item Clear.
            \item Choose $x\in\cup_{\alpha}\theta_{\alpha}$. Then there exists $\alpha'$ such that $x\in \theta_{\alpha'}$. Because
                $\theta_{\alpha'}$ is an open set, there exists a $r>0$ such that 
                $B_r(x)\subset\theta_{\alpha'}\subset\cup_{\alpha}\theta_{\alpha}$ as wanted.
            \item Let $x\in\cap_{i=1}^n \theta_{\alpha_i}$, then there exists $r_1,\hdots,r_n$ such that 
                $B_{r_1}(x)\subset\theta_{\alpha_1},\hdots,B_{r_n}(x)\subset\theta_{\alpha_n}$.
        \end{enumerate}
    \end{proof}

    \begin{remark}
        (3) only works for a finite collection. For example, $\cap_{n=1}^{\infty} (-\nicefrac{1}{n},\nicefrac{1}{n}) = \{0\}$ which
        is not open!
    \end{remark}

    \begin{definition}
        A set $E\subset \mathbb{R}^d$ is \textbf{closed} if $E^c$ is open.
    \end{definition}

    \begin{example}
        \begin{enumerate}
            \item $[0,1]\subset\mathbb{R}$ is closed. Indeed, $[0,1]^c = (-\infty, 0) \cup (1,\infty)$.
            \item $\emptyset$ and $\mathbb{R}^d$ are both open and closed.
        \end{enumerate}
    \end{example}

    Note that most sets are neither open nor closed e.g. $(0,1]\subset \mathbb{R}$ is not open or closed.

\end{document}
